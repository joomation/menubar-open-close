<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
    <title>menubar-open-close</title>
</head>

<body>
    
    <div class="menu-bar-wrap">
        <div class="title">
            <p>JOOMATION</p>
            <h1>CSS Animation - Menu bar</h1>
        </div>
        <div class="menu-bar-disc">
            <div class="title">
                <h2>01</h2>
            </div>
            <div class="menu-bar bar-type-1" onclick="menuToggle(null,event)">
                <span></span>
                <span></span>
            </div>
        </div>
        <div class="menu-bar-disc">
            <div class="title">
                <h2>02</h2>
            </div>
            <div class="menu-bar bar-type-2" onclick="menuToggle(null,event)">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        <div class="menu-bar-disc">
            <div class="title">
                <h2>03</h2>
            </div>
            <div class="menu-bar bar-type-3" onclick="menuToggle('twoMotions',event)">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        <div class="menu-bar-disc">
            <div class="title">
                <h2>04</h2>
            </div>
            <div class="menu-bar bar-type-4" onclick="menuToggle('twoMotions',event)">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        <div class="menu-bar-disc">
            <div class="title">
                <h2>05</h2>
            </div>
            <div class="menu-bar bar-type-5" onclick="menuToggle(null,event)">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        <div class="menu-bar-disc">
            <div class="title">
                <h2>06</h2>
            </div>
            <div class="menu-bar bar-type-6" onclick="menuToggle(null,event)">
                <span></span>
                <span></span>
            </div>
        </div>
    </div>
    <footer></footer>
</body>
<script>
    function menuToggle(type, e) {
        e.stopPropagation();
        var element = e.currentTarget;
        element.classList.toggle("active");
        if (type === 'twoMotions') {
            secondAction(element)
        }
    }

    function secondAction(element) {
        var children = element.children;
        for (var i = 0; i < children.length; i++) {
            one(children[i], "transitionend", handler.bind(this, children));
        }


    }

    function handler(element) {
        for (var i = 0; i < element.length; i++) {
            if (element[i].classList.contains('second')) {
                element[i].classList.remove('second')
            } else {
                element[i].classList.add('second')
            }

        }

    }
    // one event
    function one(node, type, response) {

        node.addEventListener(type, function (e) {
            // remove event
            e.target.removeEventListener(e.type, arguments.callee);
            // call handler
            return response(e);
        });

    }
</script>

</html>